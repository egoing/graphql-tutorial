<html>
    <body>
        <h1>Graphql!</h1>
        <h2 id="title"></h2>
        <ul id="topics"></ul> 
        <script>
            function init(){
                fetch('/graphql', {
                    method:'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        query: `
                        {
                            title
                            topics{id title}
                        }`
                    })
                })
                .then(type=>type.json())
                .then(result=>{
                    document.querySelector('#title').innerHTML = result.data.title;
                    let listTag = '';
                    const topics = result.data.topics;
                    for(let i=0; i<topics.length; i++){
                        listTag += `
                            <li>
                                <a 
                                    href="topics/${topics[i].id}" 
                                >
                                    ${topics[i].title}
                                </a>
                            </li>`
                    }
                    document.querySelector('#topics').innerHTML = listTag;
                })
            }
            init();
        </script>
    </body>
</html>